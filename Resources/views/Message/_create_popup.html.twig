<script type="text/javascript">

function createMessage() {
    $( "#createmessage" ).dialog("open");
    return false;
}

jQuery(document).ready(function() {
    $( "#createmessage" ).dialog({
      autoOpen: false,
      height: 300,
      width: 350,
      modal: true
    });
});

</script>

<div id="createmessage" title="Create and send a Message">
<form method="POST" action="{{ path('message_create', { 'access': 'ajax' }) }}">
{% if mconfig.message_type is defined %}
<input id="message_type" type="hidden" name="message_type" value="{{mconfig.message_type}}">
{% endif %}
{% if mconfig.context is defined %}
<input id="system" type="hidden" name="message_context[system]" value="{{mconfig.context.system}}">
<input id="object_name" type="hidden" name="message_context[object_name]" value="{{mconfig.context.object_name}}">
<input id="external_id" type="hidden" name="message_context[external_id]" value="{{mconfig.context.external_id}}">
{% endif %}
{{ form_widget(sakonnin.getCreateForm({'message_data': mconfig, 'message_context': mconfig.context, 'create_view': true})) }}
</div>
</form>

